> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ https://hencoder.com/ui-1-3/

è¿™æœŸæ˜¯ HenCoder è‡ªå®šä¹‰ç»˜åˆ¶çš„ç¬¬ä¸‰æœŸï¼šæ–‡å­—çš„ç»˜åˆ¶ã€‚

ä¹‹å‰çš„å†…å®¹åœ¨è¿™é‡Œï¼š
[HenCoder Android å¼€å‘è¿›é˜¶ è‡ªå®šä¹‰ View 1-1 ç»˜åˆ¶åŸºç¡€](http://hencoder.com/ui-1-1)
[HenCoder Android å¼€å‘è¿›é˜¶ è‡ªå®šä¹‰ View 1-2 Paint è¯¦è§£](http://hencoder.com/ui-1-2)

å¦‚æœä½ æ²¡å¬è¯´è¿‡ HenCoderï¼Œå¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸ªï¼š
[HenCoderï¼šç»™é«˜çº§ Android å·¥ç¨‹å¸ˆçš„è¿›é˜¶æ‰‹å†Œ](http://hencoder.com/overview)

## ç®€ä»‹

ä¸ŠæœŸçš„ Paint è¯¦è§£é‡Œå·²ç»è¯´è¿‡ï¼Œæ–‡å­—çš„ç»˜åˆ¶æ‰€èƒ½æ§åˆ¶çš„å†…å®¹å¤ªå¤šå¤ªç»†ï¼Œå¿…é¡»æ‹†æˆå•ç‹¬çš„ä¸€æœŸä¸“é—¨æ¥è®²ã€‚ä»Šå¤©è¿™æœŸï¼Œå°±æ˜¯æ¥æŠŠè¿™äº›ç»†èŠ‚è®²æ¸…æ¥šçš„ã€‚

éœ€è¦è¯´æ˜çš„æœ‰ä¸¤ç‚¹ï¼š

1.  å’Œä¸ŠæœŸä¸€æ ·ï¼Œè¿™æœŸè®²çš„æ˜¯ç»†èŠ‚ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†å†…å®¹å¹¶ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œæ‰€ä»¥è¿™æœŸä½ ä¸å¿…è¦æ±‚è‡ªå·±æŠŠå†…å®¹å…¨éƒ¨èƒŒä¼šï¼Œè€Œåªè¦åšåˆ°å…¨éƒ¨ç†è§£ï¼ŒçŸ¥é“éƒ½æœ‰ä»€ä¹ˆä¸œè¥¿ï¼Œå¤§æ¦‚æ€ä¹ˆç”¨å°±å¥½ï¼Œåˆ°ä½ çœŸæ­£éœ€è¦ç”¨çš„æ—¶å€™å†æ‹å›æ¥çœ‹å°±æ˜¯ï¼›
2.  é™¤äº†å¸¸ç”¨å’Œä¸å¸¸ç”¨çš„å†…å®¹ï¼Œæœ¬æœŸè¿˜ä¼šè®²åˆ°ä¸€äº›æ¯”è¾ƒåé—¨çš„ç»†èŠ‚ã€‚è¿™äº›åé—¨å‡ ä¹æ°¸è¿œä¸ä¼šç”¨åˆ°ï¼Œæˆ‘è®²è¿™äº›åé—¨çš„ç›®çš„ä¹Ÿåªæ˜¯ä¸ºäº†åšåˆ°çŸ¥è¯†çš„å…¨è¦†ç›–ï¼Œå¸®ä½ ç ´å¼€è¿·é›¾è§£å¼€è°œå›¢ï¼ŒæŠŠé‚£äº›ã€Œå§‹ç»ˆæ²¡æœ‰ææ‡‚ï¼Œä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ã€çš„ API è§£é‡Šå‡ºæ¥ã€‚æœ‰çš„æ—¶å€™ï¼Œä¸€æ ·ä¸œè¥¿ä½ ç¡®å®šäº†å®ƒç¡®å®æ²¡ç”¨ï¼Œä¹Ÿå°±å¤Ÿäº†ã€‚æ‰€ä»¥å¦‚æœé‡åˆ°è¿™äº›åé—¨çš„å†…å®¹ï¼Œä½ æ„Ÿå…´è¶£ï¼Œçœ‹çœ‹å°±å¥½ï¼›ä¸æ„Ÿå…´è¶£ï¼Œä¸çœ‹ä¹Ÿç½¢â€”â€”æ€»ä¹‹ï¼Œä¸è¦æŠŠå¤ªå¤šç²¾åŠ›æ”¾åœ¨å®ƒä»¬èº«ä¸Šã€‚

ä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚

## 1 Canvas ç»˜åˆ¶æ–‡å­—çš„æ–¹å¼

`Canvas` çš„æ–‡å­—ç»˜åˆ¶æ–¹æ³•æœ‰ä¸‰ä¸ªï¼š`drawText()` `drawTextRun()` å’Œ `drawTextOnPath()`ã€‚

### 1.1 drawText(String text, float x, float y, Paint paint)

`drawText()` æ˜¯ `Canvas` æœ€åŸºæœ¬çš„ç»˜åˆ¶æ–‡å­—çš„æ–¹æ³•ï¼šç»™å‡ºæ–‡å­—çš„å†…å®¹å’Œä½ç½®ï¼Œ `Canvas` æŒ‰è¦æ±‚å»ç»˜åˆ¶æ–‡å­—ã€‚

```
String text = "Hello HenCoder";

...

canvas.drawText(text, 200, 100, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig5zvxdn1j20cc02gt8y.jpg)

æ–¹æ³•çš„å‚æ•°å¾ˆç®€å•ï¼š `text` æ˜¯æ–‡å­—å†…å®¹ï¼Œ`x` å’Œ `y` æ˜¯æ–‡å­—çš„åæ ‡ã€‚ä½†éœ€è¦æ³¨æ„ï¼šè¿™ä¸ªåæ ‡å¹¶ä¸æ˜¯æ–‡å­—çš„å·¦ä¸Šè§’ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸å·¦ä¸‹è§’æ¯”è¾ƒæ¥è¿‘çš„ä½ç½®ã€‚å¤§æ¦‚åœ¨è¿™é‡Œï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig60bobb0j20ek04dwex.jpg)

è€Œå¦‚æœä½ åƒç»˜åˆ¶å…¶ä»–å†…å®¹ä¸€æ ·ï¼Œåœ¨ç»˜åˆ¶æ–‡å­—çš„æ—¶å€™æŠŠåæ ‡å¡«æˆ (0, 0)ï¼Œæ–‡å­—å¹¶ä¸ä¼šæ˜¾ç¤ºåœ¨ View çš„å·¦ä¸Šè§’ï¼Œè€Œæ˜¯ä¼šå‡ ä¹å®Œå…¨æ˜¾ç¤ºåœ¨ View çš„ä¸Šæ–¹ï¼Œåˆ°äº† View å¤–éƒ¨çœ‹ä¸åˆ°çš„ä½ç½®ï¼š

```
canvas.drawText(text, 0, 0, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig60ha0u4j20ga031mx2.jpg)

> â†‘ è¿™é‡Œæ²¡æœ‰è´´é”™å›¾å“¦

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig60r1tw4j205k053dh5.jpg)

å†é™„ä¸Šä¸€å¼ å›¾ï¼Œåº”è¯¥èƒ½æ›´æ¸…æ¥šåœ°è¡¨è¾¾ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig60y2ch0j20kp09gtbj.jpg)

è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå…¶å®ƒçš„ `Canvas.drawXXX()` æ–¹æ³•ï¼Œéƒ½æ˜¯ä»¥å·¦ä¸Šè§’ä½œä¸ºåŸºå‡†ç‚¹çš„ï¼Œè€Œ `drawText()` å´æ˜¯æ–‡å­—å·¦ä¸‹æ–¹ï¼Ÿ

å…ˆåˆ«è§‰å¾—æ—¥äº†ç‹—ï¼Œè¿™ç§è®¾è®¡å…¶å®æ˜¯æœ‰é“ç†çš„ã€‚`drawText()` å‚æ•°ä¸­çš„ `y` ï¼ŒæŒ‡çš„æ˜¯æ–‡å­—çš„**[åŸºçº¿ï¼ˆ baseline ï¼‰](https://zh.wikipedia.org/wiki/%E5%9F%BA%E7%B7%9A)** çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¿™æ¡çº¿ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6137j5sj20a502rglw.jpg)

ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸åŒçš„è¯­è¨€å’Œæ–‡å­—ï¼Œæ¯ä¸ªå­—ç¬¦çš„é«˜åº¦å’Œä¸Šä¸‹ä½ç½®éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚è¦è®©ä¸åŒçš„æ–‡å­—å¹¶æ’æ˜¾ç¤ºçš„æ—¶å€™æ•´ä½“çœ‹èµ·æ¥ç¨³å½“ï¼Œéœ€è¦è®©å®ƒä»¬ä¸Šä¸‹å¯¹é½ã€‚ä½†è¿™ä¸ªå¯¹é½çš„æ–¹å¼ï¼Œä¸èƒ½æ˜¯ç®€å•çš„ã€Œåº•éƒ¨å¯¹é½ã€æˆ–ã€Œé¡¶éƒ¨å¯¹é½ã€æˆ–ã€Œä¸­é—´å¯¹é½ã€ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ç§ç±»ä¼¼äºã€Œé‡å¿ƒå¯¹é½ã€çš„æ–¹å¼ã€‚å°±åƒç”µçº¿ä¸Šçš„å°é¸Ÿä¸€æ ·ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig61bpsw5j20dv04o3yv.jpg)

> æ¯åªå°é¸Ÿçš„æœ€é«˜ç‚¹å’Œæœ€ä½ç‚¹éƒ½ä¸ä¸€æ ·ï¼Œä½†ç”»é¢å¾ˆå¹³è¡¡

è€Œè¿™ä¸ªç”¨æ¥è®©æ‰€æœ‰æ–‡å­—äº’ç›¸å¯¹é½çš„åŸºå‡†çº¿ï¼Œå°±æ˜¯**åŸºçº¿ (baseline)**ã€‚ `drawText()` æ–¹æ³•å‚æ•°ä¸­çš„ `y` å€¼ï¼Œå°±æ˜¯æŒ‡å®šçš„åŸºçº¿çš„ä½ç½®ã€‚

è¯´å®Œ `y` å€¼ï¼Œå†è¯´è¯´ `x` å€¼ã€‚ä»å‰é¢å›¾ä¸­çš„æ ‡è®°å¯ä»¥çœ‹å‡ºæ¥ï¼Œã€ŒHello HenCoderã€ç»˜åˆ¶å‡ºæ¥ä¹‹åçš„ `x` ç‚¹å¹¶ä¸æ˜¯å­—æ¯ "H" å·¦è¾¹çš„ä½ç½®ï¼Œè€Œæ˜¯æ¯”å®ƒçš„å·¦è¾¹å†å¾€å·¦ä¸€ç‚¹ç‚¹ã€‚é‚£ä¹ˆè¿™ä¸ªã€Œå¾€å·¦çš„ä¸€ç‚¹ç‚¹ã€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

å®ƒæ˜¯å­—æ¯ "H" çš„å·¦è¾¹çš„ç©ºéš™ã€‚ç»å¤§å¤šæ•°çš„å­—ç¬¦ï¼Œå®ƒä»¬çš„å®½åº¦éƒ½æ˜¯è¦ç•¥å¾®å¤§äºå®é™…æ˜¾ç¤ºçš„å®½åº¦çš„ã€‚å­—ç¬¦çš„å·¦å³ä¸¤è¾¹ä¼šç•™å‡ºä¸€éƒ¨åˆ†ç©ºéš™ï¼Œç”¨äºæ–‡å­—ä¹‹é—´çš„é—´éš”ï¼Œä»¥åŠæ–‡å­—å’Œè¾¹æ¡†çš„é—´éš”ã€‚å°±åƒè¿™æ ·ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig61gild3j20x607iabs.jpg)

> ç”¨ç«–çº¿æ ‡è®°å‡ºè¾¹ç•Œåçš„æ–‡å­—ã€‚

æ‰€ä»¥ï¼Œæ˜ç™½ä¸ºä»€ä¹ˆ `x` åæ ‡åœ¨ "H" çš„å·¦è¾¹å†å¾€å·¦ä¸€ç‚¹ç‚¹çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ç´§è´´ç€ "H" çš„å·¦è¾¹çº¿äº†å—ï¼Ÿå°±æ˜¯å› ä¸º "H" çš„è¿™ä¸ªç•™å‡ºçš„ç©ºéš™ã€‚

é™¤äº† `drawText(text, x, y, paint)` ä¹‹å¤–ï¼Œ `drawText()` è¿˜æœ‰å‡ ä¸ªé‡è½½æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼è·Ÿè¿™ä¸ªéƒ½å·®ä¸å¤šï¼Œæˆ‘å°±ä¸è¯´äº†ï¼Œä½ è‡ªå·±çœ‹å§ã€‚

### 1.2 drawTextRun()

> å£°æ˜ï¼šè¿™ä¸ªæ–¹æ³•å¯¹ä¸­å›½äººæ²¡ç”¨ã€‚æ‰€ä»¥å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥ç»§ç»­çœ‹ï¼›è€Œå¦‚æœä½ æƒ³çœæ—¶é—´ï¼Œç›´æ¥è·³è¿‡è¿™ä¸ªæ–¹æ³•çœ‹åé¢çš„å°±å¥½äº†ï¼Œæ²¡æœ‰ä»»ä½•æ¯’å‰¯ä½œç”¨ã€‚

`drawTextRun()` æ˜¯åœ¨ API 23 æ–°åŠ å…¥çš„æ–¹æ³•ã€‚å®ƒå’Œ `drawText()` ä¸€æ ·éƒ½æ˜¯ç»˜åˆ¶æ–‡å­—ï¼Œä½†åŠ å…¥äº†ä¸¤é¡¹é¢å¤–çš„è®¾ç½®â€”â€”**ä¸Šä¸‹æ–‡å’Œæ–‡å­—æ–¹å‘**â€”â€”ç”¨äºè¾…åŠ©ä¸€äº›æ–‡å­—ç»“æ„æ¯”è¾ƒç‰¹æ®Šçš„è¯­è¨€çš„ç»˜åˆ¶ã€‚

*   **é¢å¤–è®¾ç½®ä¸€ï¼šä¸Šä¸‹æ–‡ã€‚**

    æœ‰äº›è¯­è¨€çš„æ–‡å­—ï¼Œå­—ç¬¦çš„å½¢çŠ¶ä¼šäº’ç›¸ä¹‹é—´å½±å“ï¼šä¸€ä¸ªå­—ä½ å•ç‹¬å†™æ˜¯ä¸€ä¸ªæ ·ï¼Œå’Œåˆ«çš„å­—æ”¾åœ¨ä¸€èµ·å†™åˆæ˜¯å¦å¤–ä¸€ä¸ªæ ·ã€‚ä¸è¿‡ç”±äºæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„è¯­è¨€â€”â€”æ±‰è¯­å’Œè‹±è¯­â€”â€”éƒ½æ²¡æœ‰è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥åªé è¯´å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘å°±ç”¨å›¾è¯´æ˜ä¸€ä¸‹å§ã€‚

    ä»¥é˜¿æ‹‰ä¼¯æ–‡ä¸ºä¾‹ã€‚é˜¿æ‹‰ä¼¯æ–‡é‡Œçš„ã€ŒØ¹Ø±Ø¨Ù‰ï¼ˆé˜¿æ‹‰ä¼¯ï¼‰ã€æ˜¯ä¸€ä¸ªå››å­—è¯ï¼Œå®ƒçš„ä¸­é—´ä¸¤ä¸ªå­—ç¬¦ã€ŒØ±Ø¨ã€åœ¨è¿™ä¸ªè¯é‡Œçš„æ ·å­ï¼Œå’Œå•ç‹¬å†™çš„æ—¶å€™çš„æ ·å­æ˜¯ä¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¿™å››ä¸ªå­—å†™åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä¸­é—´ä¸¤ä¸ªå­—ç”±äºå—åˆ°ä¸¤è¾¹çš„å­—çš„å½±å“ï¼Œå½¢çŠ¶è¢«æ”¹å˜äº†ã€‚çœ‹å›¾å§ï¼š

    ![](https://ws3.sinaimg.cn/large/52eb2279ly1fig61oddfzj20he0f7q4n.jpg)

    > ä¸Šé¢ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œçš„æ–‡å­—æ˜¯å®Œå…¨ä¸€æ ·çš„ä¿©å­—ï¼Œä½ æ•¢ä¿¡ï¼Ÿ

    ![](https://ws3.sinaimg.cn/large/52eb2279ly1fig620lx34j207g07g77v.jpg)

    å“‡å¡ï¼Œæ˜¯ä¸æ˜¯ç‰¹åˆ«ç¥å¥‡ï¼Ÿ

    ä¸è¿‡æˆ‘ä»¬å°±ä¸ç”¨ç®¡å®ƒä¸ºä»€ä¹ˆè¿™ä¹ˆç¥å¥‡äº†ï¼Œä¹Ÿä¸ç”¨æ›¿é˜¿æ‹‰ä¼¯äººæ“å¿ƒè¿™ä¹ˆå¤æ‚çš„æ–‡å­—ä»–ä»¬ä½¿ç”¨èµ·æ¥ä¼šä¸ä¼šå¾ˆç—›è‹¦ï¼Œäººå®¶éƒ½å·²ç»ç”¨äº†å‡ ç™¾ä¸Šåƒå¹´äº†ã€‚æˆ‘è¿˜è¯´å›åˆ° `drawTextRun()`ã€‚ `drawTextRun()` é™¤äº†æ–‡å­—çš„å†…å®¹å’Œä½ç½®ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®æ–‡å­—çš„ä¸Šä¸‹æ–‡ï¼ˆä¹Ÿå°±æ˜¯è¦ç»˜åˆ¶çš„æ–‡å­—çš„å·¦è¾¹å’Œå³è¾¹æ˜¯ä»€ä¹ˆæ–‡å­—ï¼Œè™½ç„¶è¿™äº›æ–‡å­—å¹¶ä¸ä¼šè¢«ç»˜åˆ¶å‡ºæ¥ï¼‰ï¼Œä»è€Œè®©åŒæ ·çš„æ–‡å­—å¯ä»¥æŒ‰éœ€è¡¨ç°å‡ºä¸åŒçš„æ˜¾ç¤ºæ•ˆæœã€‚

*   **é¢å¤–è®¾ç½®äºŒï¼šæ–‡å­—æ–¹å‘ã€‚**

    é™¤äº†ä¸Šä¸‹æ–‡ï¼Œ `drawTextRun()` è¿˜å¯ä»¥è®¾ç½®æ–‡å­—çš„æ–¹å‘ï¼Œå³æ–‡å­—æ˜¯ä»å·¦åˆ°å³è¿˜æ˜¯ä»å³åˆ°å·¦æ’åˆ—çš„ã€‚

ä»‹ç»å®Œè¿™ä¸¤ç±»é¢å¤–è®¾ç½®ï¼Œæ¥çœ‹ä¸€ä¸‹å…·ä½“çš„æ–¹æ³•å§ï¼š

drawTextRun(CharSequence text, int start, int end, int contextStart, int contextEnd, float x, float y, boolean isRtl, Paint paint)

å‚æ•°ï¼š
`text`ï¼šè¦ç»˜åˆ¶çš„æ–‡å­—
`start`ï¼šä»é‚£ä¸ªå­—å¼€å§‹ç»˜åˆ¶
`end`ï¼šç»˜åˆ¶åˆ°å“ªä¸ªå­—ç»“æŸ
`contextStart`ï¼šä¸Šä¸‹æ–‡çš„èµ·å§‹ä½ç½®ã€‚`contextStart` éœ€è¦å°äºç­‰äº `start`
`contextEnd`ï¼šä¸Šä¸‹æ–‡çš„ç»“æŸä½ç½®ã€‚`contextEnd` éœ€è¦å¤§äºç­‰äº `end`
`x`ï¼šæ–‡å­—å·¦è¾¹çš„åæ ‡
`y`ï¼šæ–‡å­—çš„åŸºçº¿åæ ‡
`isRtl`ï¼šæ˜¯å¦æ˜¯ RTLï¼ˆRight-To-Leftï¼Œä»å³å‘å·¦ï¼‰

è¦å®ç°ä¸Šé¢å›¾ä¸­çš„ã€ŒåŒæ ·çš„å­—æœ‰ä¸åŒçš„æ˜¾ç¤ºã€æ•ˆæœï¼Œè°ƒèŠ‚ `contextStart` å’Œ `contextEnd` å°±å¯ä»¥äº†ï¼Œè‡³äºå…·ä½“çš„å®ç°ï¼Œä½ æœ‰å…´è¶£çš„è¯å°±è‡ªå·±è¯•è¯•å§ã€‚

è¿™å°±æ˜¯ `drawTextRun()` ï¼Œä¸€ä¸ªå¢åŠ äº†ã€Œä¸Šä¸‹æ–‡ã€å’Œã€ŒRTLã€æ”¯æŒçš„å¢å¼ºç‰ˆæœ¬çš„ `drawText()` ã€‚ä¸è¿‡å°±åƒåˆšæ‰è¯´è¿‡çš„ï¼Œè¿™ä¸ªæ–¹æ³•å¯¹ä¸­å›½äººå…¶å®æ²¡ä»€ä¹ˆç”¨â€¦â€¦

### 1.3 drawTextOnPath()

æ²¿ç€ä¸€æ¡ `Path` æ¥ç»˜åˆ¶æ–‡å­—ã€‚è¿™æ˜¯ä¸€ä¸ªè€æ‚æŠ€çš„æ–¹æ³•ã€‚

```
canvas.drawPath(path, paint); // æŠŠ Path ä¹Ÿç»˜åˆ¶å‡ºæ¥ï¼Œç†è§£èµ·æ¥æ›´æ–¹ä¾¿  
canvas.drawTextOnPath("Hello HeCoder", path, 0, 0, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig62s8op9j20dp065dgg.jpg)

> åï¼Œæ‹è§’å¤„çš„æ–‡å­—æ€ä¹ˆé‚£ä¹ˆéš¾çœ‹ï¼Ÿ
> 
> æ‰€ä»¥è®°ä½ä¸€æ¡åŸåˆ™ï¼š `drawTextOnPath()` ä½¿ç”¨çš„ `Path` ï¼Œæ‹å¼¯å¤„å…¨ç”¨åœ†è§’ï¼Œåˆ«ç”¨å°–è§’ã€‚

å…·ä½“çš„æ–¹æ³•å¾ˆç®€å•ï¼š

`drawTextOnPath(String text, Path path, float hOffset, float vOffset, Paint paint)`

å‚æ•°é‡Œï¼Œéœ€è¦è§£é‡Šçš„åªæœ‰ä¸¤ä¸ªï¼š `hOffset` å’Œ `vOffset`ã€‚å®ƒä»¬æ˜¯æ–‡å­—ç›¸å¯¹äº `Path` çš„æ°´å¹³åç§»é‡å’Œç«–ç›´åç§»é‡ï¼Œåˆ©ç”¨å®ƒä»¬å¯ä»¥è°ƒæ•´æ–‡å­—çš„ä½ç½®ã€‚ä¾‹å¦‚ä½ è®¾ç½® `hOffset` ä¸º 5ï¼Œ `vOffset` ä¸º 10ï¼Œæ–‡å­—å°±ä¼šå³ç§» 5 åƒç´ å’Œä¸‹ç§» 10 åƒç´ ã€‚

### 1.4 StaticLayout

é¢å¤–è®²ä¸€ä¸ª `StaticLayout`ã€‚è¿™ä¸ªä¹Ÿæ˜¯ä½¿ç”¨ `Canvas` æ¥è¿›è¡Œæ–‡å­—çš„ç»˜åˆ¶ï¼Œä¸è¿‡å¹¶ä¸æ˜¯ä½¿ç”¨ `Canvas` çš„æ–¹æ³•ã€‚

`Canvas.drawText()` åªèƒ½ç»˜åˆ¶å•è¡Œçš„æ–‡å­—ï¼Œè€Œä¸èƒ½æ¢è¡Œã€‚å®ƒï¼š

*   ä¸èƒ½åœ¨ View çš„è¾¹ç¼˜è‡ªåŠ¨æŠ˜è¡Œ

```
  String text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry.";

  ...

  canvas.drawText(text, 50, 100, paint);

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig630yur1j20sn06gmxz.jpg)

> åˆ°äº† View çš„è¾¹ç¼˜å¤„ï¼Œæ–‡å­—ç»§ç»­å‘åç»˜åˆ¶åˆ°çœ‹ä¸è§çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨æ¢è¡Œ

*   ä¸èƒ½åœ¨æ¢è¡Œç¬¦ `\n` å¤„æ¢è¡Œ

```
  String text = "a\nbc\ndefghi\njklm\nnopqrst\nuvwx\nyz";

  ...

  canvas.drawText(text, 50, 100, paint);

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig63b5v9mj20p605bmxz.jpg)

> åœ¨æ¢è¡Œç¬¦ `\n` çš„ä½ç½®å¹¶æ²¡æœ‰æ¢è¡Œï¼Œè€Œåªæ˜¯åŠ äº†ä¸ªç©ºæ ¼

å¦‚æœéœ€è¦ç»˜åˆ¶å¤šè¡Œçš„æ–‡å­—ï¼Œä½ å¿…é¡»è‡ªè¡ŒæŠŠæ–‡å­—åˆ‡æ–­ååˆ†å¤šæ¬¡ä½¿ç”¨ `drawText()` æ¥ç»˜åˆ¶ï¼Œæˆ–è€…â€”â€”ä½¿ç”¨ `StaticLayout` ã€‚

`StaticLayout` å¹¶ä¸æ˜¯ä¸€ä¸ª `View` æˆ–è€… `ViewGroup` ï¼Œè€Œæ˜¯ `android.text.Layout` çš„å­ç±»ï¼Œå®ƒæ˜¯çº¯ç²¹ç”¨æ¥ç»˜åˆ¶æ–‡å­—çš„ã€‚ `StaticLayout` æ”¯æŒæ¢è¡Œï¼Œå®ƒæ—¢å¯ä»¥ä¸ºæ–‡å­—è®¾ç½®å®½åº¦ä¸Šé™æ¥è®©æ–‡å­—è‡ªåŠ¨æ¢è¡Œï¼Œä¹Ÿä¼šåœ¨ `\n` å¤„ä¸»åŠ¨æ¢è¡Œã€‚

```
String text1 = "Lorem Ipsum is simply dummy text of the printing and typesetting industry.";  
StaticLayout staticLayout1 = new StaticLayout(text1, paint, 600,  
        Layout.Alignment.ALIGN_NORMAL, 1, 0, true);
String text2 = "a\nbc\ndefghi\njklm\nnopqrst\nuvwx\nyz";  
StaticLayout staticLayout2 = new StaticLayout(text2, paint, 600,  
        Layout.Alignment.ALIGN_NORMAL, 1, 0, true);

...

canvas.save();  
canvas.translate(50, 100);  
staticLayout1.draw(canvas);  
canvas.translate(0, 200);  
staticLayout2.draw(canvas);  
canvas.restore();  

```

> ä¸Šé¢ä»£ç ä¸­å‡ºç°çš„ `Canvas.save()` `Canvas.translate()` `Canvas.restore()` é…åˆèµ·æ¥å¯ä»¥å¯¹ç»˜åˆ¶çš„å†…å®¹è¿›è¡Œç§»åŠ¨ã€‚å®ƒä»¬çš„å…·ä½“ç”¨æ³•æˆ‘ä¼šåœ¨ä¸‹æœŸè®²ï¼Œè¿™æœŸä½ å°±å…ˆä¾è‘«èŠ¦ç”»ç“¢ç…§æ¬ç€ç”¨å§ã€‚

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig63j2giqj218g0umn5b.jpg)

`StaticLayout` çš„æ„é€ æ–¹æ³•æ˜¯ StaticLayout(CharSequence source, TextPaint paint, int width, Layout.Alignment align, float spacingmult, float spacingadd, boolean includepad)ï¼Œå…¶ä¸­å‚æ•°é‡Œï¼š

`width` æ˜¯æ–‡å­—åŒºåŸŸçš„å®½åº¦ï¼Œæ–‡å­—åˆ°è¾¾è¿™ä¸ªå®½åº¦åå°±ä¼šè‡ªåŠ¨æ¢è¡Œï¼›
`align` æ˜¯æ–‡å­—çš„å¯¹é½æ–¹å‘ï¼›
`spacingmult` æ˜¯è¡Œé—´è·çš„å€æ•°ï¼Œé€šå¸¸æƒ…å†µä¸‹å¡« 1 å°±å¥½ï¼›
`spacingadd` æ˜¯è¡Œé—´è·çš„é¢å¤–å¢åŠ å€¼ï¼Œé€šå¸¸æƒ…å†µä¸‹å¡« 0 å°±å¥½ï¼›
`includeadd` æ˜¯æŒ‡æ˜¯å¦åœ¨æ–‡å­—ä¸Šä¸‹æ·»åŠ é¢å¤–çš„ç©ºé—´ï¼Œæ¥é¿å…æŸäº›è¿‡é«˜çš„å­—ç¬¦çš„ç»˜åˆ¶å‡ºç°è¶Šç•Œã€‚

å¦‚æœä½ éœ€è¦è¿›è¡Œå¤šè¡Œæ–‡å­—çš„ç»˜åˆ¶ï¼Œå¹¶ä¸”å¯¹æ–‡å­—çš„æ’åˆ—å’Œæ ·å¼æ²¡æœ‰å¤ªå¤æ‚çš„èŠ±å¼è¦æ±‚ï¼Œé‚£ä¹ˆä½¿ç”¨ `StaticLayout` å°±å¥½ã€‚

## 2 Paint å¯¹æ–‡å­—ç»˜åˆ¶çš„è¾…åŠ©

`Paint` å¯¹æ–‡å­—ç»˜åˆ¶çš„è¾…åŠ©ï¼Œæœ‰ä¸¤ç±»æ–¹æ³•ï¼šè®¾ç½®æ˜¾ç¤ºæ•ˆæœçš„å’Œæµ‹é‡æ–‡å­—å°ºå¯¸çš„ã€‚

### 2.1 è®¾ç½®æ˜¾ç¤ºæ•ˆæœç±»

#### 2.1.1 setTextSize(float textSize)

è®¾ç½®æ–‡å­—å¤§å°ã€‚

```
paint.setTextSize(18);  
canvas.drawText(text, 100, 25, paint);  
paint.setTextSize(36);  
canvas.drawText(text, 100, 70, paint);  
paint.setTextSize(60);  
canvas.drawText(text, 100, 145, paint);  
paint.setTextSize(84);  
canvas.drawText(text, 100, 240, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig63wwhisj20ht085dh5.jpg)

å¾ˆç®€å•ï¼Œä¸å†è¯¦ç»†è§£é‡Šã€‚

#### 2.1.2 setTypeface(Typeface typeface)

è®¾ç½®å­—ä½“ã€‚

```
paint.setTypeface(Typeface.DEFAULT);  
canvas.drawText(text, 100, 150, paint);  
paint.setTypeface(Typeface.SERIF);  
canvas.drawText(text, 100, 300, paint);  
paint.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "Satisfy-Regular.ttf"));  
canvas.drawText(text, 100, 450, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig642zbjsj20do077mye.jpg)

è®¾ç½®ä¸åŒçš„ `Typeface` å°±å¯ä»¥æ˜¾ç¤ºä¸åŒçš„å­—ä½“ã€‚æˆ‘ä»¬ä¸­å›½äººè°ˆåˆ°ã€Œå­—ä½“ã€ï¼Œæ¯”è¾ƒç†Ÿæ‚‰çš„è¯æ˜¯ fontï¼Œ typeface å’Œ font æ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½è¡¨ç¤ºå­—ä½“ã€‚ `Typeface` è¿™ä¸ªç±»çš„å…·ä½“ç”¨æ³•ï¼Œéœ€è¦äº†è§£çš„è¯å¯ä»¥[ç›´æ¥çœ‹æ–‡æ¡£](https://developer.android.com/reference/android/graphics/Typeface.html)ï¼Œå¾ˆç®€å•ã€‚

> ä¸¥æ ¼åœ°è¯´ï¼Œå…¶å® typeface å’Œ font æ„æ€ä¸å®Œå…¨ä¸€æ ·ã€‚typeface æŒ‡çš„æ˜¯æŸå¥—å­—ä½“ï¼ˆå³ font family ï¼‰ï¼Œè€Œ font æŒ‡çš„æ˜¯ä¸€ä¸ª typeface å…·ä½“çš„æŸä¸ª weight å’Œ size çš„åˆ†æ”¯ã€‚ä¸è¿‡æ— æ‰€è°“å•¦~ åšäººæœ€ç´§è¦ç³»å¼€å¿ƒå•¦ã€‚

#### 2.1.3 setFakeBoldText(boolean fakeBoldText)

æ˜¯å¦ä½¿ç”¨ä¼ªç²—ä½“ã€‚

```
paint.setFakeBoldText(false);  
canvas.drawText(text, 100, 150, paint);  
paint.setFakeBoldText(true);  
canvas.drawText(text, 100, 230, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig648egsrj20ct04szky.jpg)

ä¹‹æ‰€ä»¥å«ä¼ªç²—ä½“ï¼ˆ fake bold ï¼‰ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯é€šè¿‡é€‰ç”¨æ›´é«˜ weight çš„å­—ä½“è®©æ–‡å­—å˜ç²—ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºåœ¨è¿è¡Œæ—¶æŠŠæ–‡å­—ç»™ã€Œæç²—ã€äº†ã€‚

#### 2.1.4 setStrikeThruText(boolean strikeThruText)

æ˜¯å¦åŠ åˆ é™¤çº¿ã€‚

```
paint.setStrikeThruText(true);  
canvas.drawText(text, 100, 150, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig64entbwj20dg02xjro.jpg)

#### 2.1.5 setUnderlineText(boolean underlineText)

æ˜¯å¦åŠ ä¸‹åˆ’çº¿ã€‚

```
paint.setUnderlineText(true);  
canvas.drawText(text, 100, 150, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig64li3jgj20e904lt9k.jpg)

#### 2.1.6 setTextSkewX(float skewX)

è®¾ç½®æ–‡å­—æ¨ªå‘é”™åˆ‡è§’åº¦ã€‚å…¶å®å°±æ˜¯æ–‡å­—å€¾æ–œåº¦çš„å•¦ã€‚

```
paint.setTextSkewX(-0.5f);  
canvas.drawText(text, 100, 150, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig64r0lknj20d902r0t4.jpg)

#### 2.1.7 setTextScaleX(float scaleX)

è®¾ç½®æ–‡å­—æ¨ªå‘æ”¾ç¼©ã€‚ä¹Ÿå°±æ˜¯æ–‡å­—å˜èƒ–å˜ç˜¦ã€‚

```
paint.setTextScaleX(1);  
canvas.drawText(text, 100, 150, paint);  
paint.setTextScaleX(0.8f);  
canvas.drawText(text, 100, 230, paint);  
paint.setTextScaleX(1.2f);  
canvas.drawText(text, 100, 310, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig64wik18j20fk07f3zm.jpg)

#### 2.1.8 setLetterSpacing(float letterSpacing)

è®¾ç½®å­—ç¬¦é—´è·ã€‚é»˜è®¤å€¼æ˜¯ 0ã€‚

```
paint.setLetterSpacing(0.2f);  
canvas.drawText(text, 100, 150, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6534shej20k0038wes.jpg)

> ä¸ºä»€ä¹ˆåœ¨é»˜è®¤çš„å­—ç¬¦é—´è·ä¸º 0 çš„æƒ…å†µä¸‹ï¼Œå­—ç¬¦å’Œå­—ç¬¦ä¹‹é—´ä¹Ÿæ²¡æœ‰ç´§ç´§è´´ç€ï¼Œè¿™ä¸ªæˆ‘åœ¨å‰é¢è®² `Canvas.drawText()` çš„ `x` å‚æ•°çš„æ—¶å€™å·²ç»è¯´è¿‡äº†ï¼Œåœ¨è¿™é‡Œåº”è¯¥æ²¡æœ‰ç–‘é—®å§ï¼Ÿ

#### 2.1.9 setFontFeatureSettings(String settings)

ç”¨ CSS çš„ `font-feature-settings` çš„æ–¹å¼æ¥è®¾ç½®æ–‡å­—ã€‚

```
paint.setFontFeatureSettings("smcp"); // è®¾ç½® "small caps"  
canvas.drawText("Hello HenCoder", 100, 150, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig657a4vxj20dz033jrm.jpg)

CSS å…¨ç§°æ˜¯ Cascading Style Sheets ï¼Œæ˜¯ç½‘é¡µå¼€å‘ç”¨æ¥è®¾ç½®é¡µé¢å„ç§å…ƒç´ çš„æ ·å¼çš„ã€‚å’¦ï¼Œç½‘é¡µå¼€å‘çš„è®¾ç½®æ€ä¹ˆä¼šå‡ºç°åœ¨ Android çš„ API é‡Œï¼Ÿ

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig65c2jv0j204q03t3yy.jpg)

å¤§å¤šæ•° Android å¼€å‘è€…éƒ½ä¸äº†è§£è¿™ä¸ª CSS çš„ `font-feature-settings` å±æ€§ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œè¿™ä¸ªå±æ€§è®¾ç½®çš„éƒ½æ˜¯æ–‡å­—çš„ä¸€äº›æ¬¡è¦ç‰¹æ€§ï¼Œæ‰€ä»¥ä¸ç”¨ç€æ€¥äº†è§£è¿™ä¸ªæ–¹æ³•ã€‚å½“ç„¶æœ‰å…´è¶£çš„è¯ä¹Ÿå¯ä»¥çœ‹ä¸€çœ‹å“ˆï¼Œæ–‡æ¡£åœ¨[è¿™é‡Œ](https://www.w3.org/TR/css-fonts-3/#font-feature-settings-prop)ã€‚

#### 2.1.10 setTextAlign(Paint.Align align)

è®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼ã€‚ä¸€å…±æœ‰ä¸‰ä¸ªå€¼ï¼š`LEFT` `CETNER` å’Œ `RIGHT`ã€‚é»˜è®¤å€¼ä¸º `LEFT`ã€‚

```
paint.setTextAlign(Paint.Align.LEFT);  
canvas.drawText(text, 500, 150, paint);  
paint.setTextAlign(Paint.Align.CENTER);  
canvas.drawText(text, 500, 150 + textHeight, paint);  
paint.setTextAlign(Paint.Align.RIGHT);  
canvas.drawText(text, 500, 150 + textHeight * 2, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig65i02r3j20on07eabd.jpg)

#### 2.1.11 setTextLocale(Locale locale) / setTextLocales(LocaleList locales)

è®¾ç½®ç»˜åˆ¶æ‰€ä½¿ç”¨çš„ `Locale`ã€‚

`Locale` ç›´è¯‘æ˜¯ã€Œåœ°åŸŸã€ï¼Œå…¶å®å°±æ˜¯ä½ åœ¨ç³»ç»Ÿé‡Œè®¾ç½®çš„ã€Œè¯­è¨€ã€æˆ–ã€Œè¯­è¨€åŒºåŸŸã€ï¼ˆå…·ä½“åç§°å–å†³äºä½ ç”¨çš„æ˜¯ä»€ä¹ˆæ‰‹æœºï¼‰ï¼Œæ¯”å¦‚ã€Œç®€ä½“ä¸­æ–‡ï¼ˆä¸­å›½ï¼‰ã€ã€ŒEnglish (US)ã€ã€ŒEnglish (UK)ã€ã€‚æœ‰äº›åŒæºçš„è¯­è¨€ï¼Œåœ¨æ–‡åŒ–å‘å±•è¿‡ç¨‹ä¸­å¯¹ä¸€äº›ç›¸åŒçš„å­—è¡ç”Ÿå‡ºäº†ä¸åŒçš„å†™æ³•ï¼ˆæ¯”å¦‚ä¸­å›½å¤§é™†å’Œæ—¥æœ¬å¯¹äºæŸäº›æ±‰å­—çš„å†™æ³•å°±æœ‰ç»†å¾®å·®åˆ«ã€‚æ³¨æ„ï¼Œä¸æ˜¯ç¹ä½“å’Œç®€ä½“è¿™ç§åŒéŸ³åŒä¹‰ä¸åŒå­—ï¼Œè€ŒçœŸçš„æ˜¯åŒæ ·çš„ä¸€ä¸ªå­—æœ‰ä¸¤ç§å†™æ³•ï¼‰ã€‚ç³»ç»Ÿè¯­è¨€ä¸åŒï¼ŒåŒæ ·çš„ä¸€ä¸ªå­—çš„æ˜¾ç¤ºå°±æœ‰å¯èƒ½ä¸åŒã€‚ä½ å¯ä»¥è¯•ä¸€ä¸‹æŠŠè‡ªå·±æ‰‹æœºçš„è¯­è¨€æ”¹æˆæ—¥æ–‡ï¼Œç„¶åæ‰“å¼€å¾®ä¿¡çœ‹çœ‹èŠå¤©è®°å½•ï¼Œä½ ä¼šæ˜æ˜¾å‘ç°æ–‡å­—çš„æ˜¾ç¤ºå‘ç”Ÿäº†å¾ˆå¤šç»†å¾®çš„å˜åŒ–ï¼Œè¿™å°±æ˜¯ç”±äºç³»ç»Ÿçš„ `Locale` æ”¹å˜æ‰€å¯¼è‡´çš„ã€‚

`Canvas` ç»˜åˆ¶çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿè®¾ç½®é‡Œçš„ `Locale`ã€‚è€Œé€šè¿‡ `Paint.setTextLocale(Locale locale)` å°±å¯ä»¥åœ¨ä¸æ”¹å˜ç³»ç»Ÿè®¾ç½®çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä¿®æ”¹ç»˜åˆ¶æ—¶çš„ `Locale`ã€‚

```
paint.setTextLocale(Locale.CHINA); // ç®€ä½“ä¸­æ–‡  
canvas.drawText(text, 150, 150, paint);  
paint.setTextLocale(Locale.TAIWAN); // ç¹ä½“ä¸­æ–‡  
canvas.drawText(text, 150, 150 + textHeight, paint);  
paint.setTextLocale(Locale.JAPAN); // æ—¥è¯­  
canvas.drawText(text, 150, 150 + textHeight * 2, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig65pzeqtj20l8076tb2.jpg)

> æœ‰æ„æ€å§ï¼Ÿ

å¦å¤–ï¼Œç”±äº Android 7.0 (API v24) åŠ å…¥äº†å¤šè¯­è¨€åŒºåŸŸçš„æ”¯æŒï¼Œæ‰€ä»¥åœ¨ API v24 ä»¥åŠæ›´é«˜ç‰ˆæœ¬ä¸Šï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `setTextLocales(LocaleList locales)` æ¥ä¸ºç»˜åˆ¶è®¾ç½®å¤šä¸ªè¯­è¨€åŒºåŸŸã€‚

#### 2.1.12 setHinting(int mode)

è®¾ç½®æ˜¯å¦å¯ç”¨å­—ä½“çš„ hinting ï¼ˆå­—ä½“å¾®è°ƒï¼‰ã€‚

ç°åœ¨çš„ Android è®¾å¤‡å¤§å¤šæ•°éƒ½æ˜¯æ˜¯ç”¨çš„[çŸ¢é‡å­—ä½“](https://zh.wikipedia.org/wiki/%E7%9F%A2%E9%87%8F%E5%AD%97%E4%BD%93)ã€‚çŸ¢é‡å­—ä½“çš„åŸç†æ˜¯å¯¹æ¯ä¸ªå­—ä½“ç»™å‡ºä¸€ä¸ªå­—å½¢çš„çŸ¢é‡æè¿°ï¼Œç„¶åä½¿ç”¨è¿™ä¸€ä¸ªçŸ¢é‡æ¥å¯¹æ‰€æœ‰çš„å°ºå¯¸çš„å­—ä½“æ¥ç”Ÿæˆå¯¹åº”çš„å­—å½¢ã€‚ç”±äºä¸å¿…ä¸ºæ‰€æœ‰å­—å·éƒ½è®¾è®¡å®ƒä»¬çš„å­—ä½“å½¢çŠ¶ï¼Œæ‰€ä»¥åœ¨å­—å·è¾ƒå¤§çš„æ—¶å€™ï¼ŒçŸ¢é‡å­—ä½“ä¹Ÿèƒ½å¤Ÿä¿æŒå­—ä½“çš„åœ†æ¶¦ï¼Œè¿™æ˜¯çŸ¢é‡å­—ä½“çš„ä¼˜åŠ¿ã€‚ä¸è¿‡å½“æ–‡å­—çš„å°ºå¯¸è¿‡å°ï¼ˆæ¯”å¦‚é«˜åº¦å°äº 16 åƒç´ ï¼‰ï¼Œæœ‰äº›æ–‡å­—ä¼šç”±äºå¤±å»è¿‡å¤šç»†èŠ‚è€Œå˜å¾—ä¸å¤ªå¥½çœ‹ã€‚ hinting æŠ€æœ¯å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜çš„ï¼šé€šè¿‡å‘å­—ä½“ä¸­åŠ å…¥ hinting ä¿¡æ¯ï¼Œè®©çŸ¢é‡å­—ä½“åœ¨å°ºå¯¸è¿‡å°çš„æ—¶å€™å¾—åˆ°é’ˆå¯¹æ€§çš„ä¿®æ­£ï¼Œä»è€Œæé«˜æ˜¾ç¤ºæ•ˆæœã€‚æ•ˆæœå›¾ç›—ä¸€å¼ [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E5%AD%97%E4%BD%93%E5%BE%AE%E8%B0%83)çš„ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig65wwv1yj20ki0bywje.jpg)

åŠŸèƒ½å¾ˆå¼ºï¼Œæ•ˆæœå¾ˆèµã€‚ä¸è¿‡åœ¨ç°åœ¨ï¼ˆ 2017 å¹´ï¼‰ï¼Œæ‰‹æœºå±å¹•çš„åƒç´ å¯†åº¦å·²ç»éå¸¸é«˜ï¼Œå‡ ä¹ä¸ä¼šå†å‡ºç°å­—ä½“å°ºå¯¸å°åˆ°éœ€è¦é  hinting æ¥ä¿®æ­£çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å…¶å®â€¦â€¦ æ²¡å•¥ç”¨äº†ã€‚å¯ä»¥å¿½ç•¥ã€‚

#### 2.1.13 setElegantTextHeight(boolean elegant)

> å£°æ˜ï¼šè¿™ä¸ªæ–¹æ³•å¯¹ä¸­å›½äººæ²¡ç”¨ï¼Œä¸æƒ³çœ‹çš„è¯å¯ä»¥ç›´æ¥è·³è¿‡ï¼Œæ— æ¯’å‰¯ä½œç”¨ã€‚

è®¾ç½®æ˜¯å¦å¼€å¯æ–‡å­—çš„ elegant height ã€‚å¼€å¯ä¹‹åï¼Œæ–‡å­—çš„é«˜åº¦å°±å˜ä¼˜é›…äº†ï¼ˆè¯¯ï¼‰ã€‚ä¸‹é¢è§£é‡Šä¸€ä¸‹æ‰€è°“çš„ elegant heightï¼š

åœ¨æœ‰äº›è¯­è¨€ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›éå¸¸é«˜çš„å­—å½¢ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig661g4jfj20ne0a4gn3.jpg)

å·¦è¾¹é‚£å‡ ä¸ªæ³°æ–‡æ–‡å­—ï¼ŒæŒºé«˜çš„å§ï¼Ÿä½†å…¶å®å®ƒä»¬å·²ç»æ˜¯è¢«å‹ç¼©è¿‡äº†çš„ï¼Œå®ƒä»¬æœ¬æ¥æ¯”è¿™è¿˜è¦é«˜ã€‚

è¿™äº›æ¯”è¾ƒé«˜çš„æ–‡å­—ï¼Œé€šå¸¸éƒ½æœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„å­—ä½“ï¼šä¸€ä¸ªåŸå§‹ç‰ˆæœ¬ï¼Œä¸€ä¸ªå‹ç¼©äº†é«˜åº¦çš„ç‰ˆæœ¬ã€‚å‹ç¼©ç‰ˆæœ¬å¯ä»¥ä¿è¯è®©è¿™äº›ã€Œå¤§é«˜ä¸ªã€æ–‡å­—åœ¨å’Œæ™®é€šæ–‡å­—ï¼ˆä¾‹å¦‚æ‹‰ä¸æ–‡å­—ï¼‰æ”¾åœ¨ä¸€èµ·çš„æ—¶å€™çœ‹èµ·æ¥ä¸ä¼šæ˜¾å¾—å¤ªå¥‡æ€ªã€‚äº‹å®ä¸Šï¼Œ`Paint` ç»˜åˆ¶æ–‡å­—æ—¶æ˜¯ç”¨çš„é»˜è®¤ç‰ˆæœ¬å°±æ˜¯å‹ç¼©ç‰ˆæœ¬ï¼Œå°±åƒä¸Šå›¾è¿™æ ·ã€‚

ä¸è¿‡æœ‰çš„æ—¶å€™ï¼Œå¼€å‘è€…ä¼šéœ€è¦ä½¿ç”¨å®ƒä»¬çš„åŸå§‹ï¼ˆä¼˜é›…ï¼‰ç‰ˆæœ¬ã€‚ä½¿ç”¨ `setElegantTextHeight()` å°±å¯ä»¥åˆ‡æ¢åˆ°åŸå§‹ç‰ˆæœ¬ï¼š

```
paint.setElegantTextHeight(true);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig667rndpj20nk0b4gn5.jpg)

> è¿™å­—å¾—æœ‰å¤šé«˜ï¼Ÿ2 ç±³ 26 ï¼Ÿ

é‚£ä¹ˆï¼Œ`setElegantTextHeight()` çš„ä½œç”¨åˆ°è¿™é‡Œå°±å¾ˆæ¸…æ™°äº†ï¼š

1.  æŠŠã€Œå¤§é«˜ä¸ªã€æ–‡å­—çš„é«˜åº¦æ¢å¤ä¸ºåŸå§‹é«˜åº¦ï¼›
2.  å¢å¤§æ¯è¡Œæ–‡å­—çš„ä¸Šä¸‹è¾¹ç•Œï¼Œæ¥å®¹çº³è¢«åŠ é«˜äº†çš„æ–‡å­—ã€‚

> å…¶å®è¿™ä¸ªé—®é¢˜æˆ‘å·²ç»åœ¨ stackoverflow å›ç­”è¿‡ä¸€æ¬¡ï¼ŒåŸå›ç­”åœ¨[è¿™é‡Œ](stackoverflow.com/questions/31821866/android-textview-what-does-eleganttextheight-do-api-21/44570195#44570195)ã€‚

ä¸è¿‡å°±åƒå‰é¢è¯´çš„ï¼Œç”±äºä¸­å›½äººå¸¸ç”¨çš„æ±‰è¯­å’Œè‹±è¯­çš„æ–‡å­—å¹¶ä¸ä¼šè¾¾åˆ°è¿™ç§é«˜åº¦ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¯¹äºä¸­å›½äººåŸºæœ¬ä¸Šæ˜¯æ²¡ç”¨çš„ã€‚

#### 2.1.14 setSubpixelText(boolean subpixelText)

æ˜¯å¦å¼€å¯æ¬¡åƒç´ çº§çš„æŠ—é”¯é½¿ï¼ˆ sub-pixel anti-aliasing ï¼‰ã€‚

æ¬¡åƒç´ çº§æŠ—é”¯é½¿è¿™ä¸ªåŠŸèƒ½è§£é‡Šèµ·æ¥å¾ˆéº»çƒ¦ï¼Œç®€å•è¯´å°±æ˜¯æ ¹æ®ç¨‹åºæ‰€è¿è¡Œçš„è®¾å¤‡çš„å±å¹•ç±»å‹ï¼Œæ¥è¿›è¡Œé’ˆå¯¹æ€§çš„æ¬¡åƒç´ çº§çš„æŠ—é”¯é½¿è®¡ç®—ï¼Œä»è€Œè¾¾åˆ°æ›´å¥½çš„æŠ—é”¯é½¿æ•ˆæœã€‚æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹[è¿™ç¯‡æ–‡ç« ](http://alienryderflex.com/sub_pixel/)ã€‚

ä¸è¿‡ï¼Œå’Œå‰é¢è®²çš„å­—ä½“ hinting ä¸€æ ·ï¼Œç”±äºç°åœ¨æ‰‹æœºå±å¹•åƒç´ å¯†åº¦å·²ç»å¾ˆé«˜ï¼Œæ‰€ä»¥é»˜è®¤æŠ—é”¯é½¿æ•ˆæœå°±å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œä¸€èˆ¬æ²¡å¿…è¦å¼€å¯æ¬¡åƒç´ çº§æŠ—é”¯é½¿ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•åŸºæœ¬ä¸Šæ²¡æœ‰å¿…è¦ä½¿ç”¨ã€‚

#### 2.1.15 setLinearText(boolean linearText)

è¿™ä¸ªæ–¹æ³•è€å®è¯´æˆ‘ä»æ²¡ç”¨è¿‡ï¼Œä¹Ÿå§‹ç»ˆæ²¡æœ‰ææ‡‚å®ƒæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå°±ä¸å¼ºè¡Œè£…é€¼äº†ã€‚æŠŠæ–‡æ¡£ä¸­çš„è§£é‡Šç…§æ¬è¿‡æ¥ï¼Œå„ä½è‡ªå·±ç ”ç©¶å§ã€‚

> Helper for setFlags(), setting or clearing the LINEAR_TEXT_FLAG bit

ä¸Šé¢è¿™å¥ä¸­æåˆ°çš„ `LINEAR_TEXT_FLAG`:

> Paint flag that enables smooth linear scaling of text.
> 
> Enabling this flag does not actually scale text, but rather adjusts text draw operations to deal gracefully with smooth adjustment of scale. When this flag is enabled, font hinting is disabled to prevent shape deformation between scale factors, and glyph caching is disabled due to the large number of glyph images that will be generated.
> 
> SUBPIXEL_TEXT_FLAG should be used in conjunction with this flag to prevent glyph positions from snapping to whole pixel values as scale factor is adjusted.

ä»¥ä¸Šå°±æ˜¯ `Paint` çš„å¯¹æ–‡å­—çš„æ˜¾ç¤ºæ•ˆæœè®¾ç½®ç±»æ–¹æ³•ã€‚ä¸‹é¢ä»‹ç»å®ƒçš„ç¬¬äºŒç±»æ–¹æ³•ï¼šæµ‹é‡æ–‡å­—å°ºå¯¸ç±»ã€‚

### 2.2 æµ‹é‡æ–‡å­—å°ºå¯¸ç±»

ä¸è®ºæ˜¯æ–‡å­—ï¼Œè¿˜æ˜¯å›¾å½¢æˆ– `Bitmap`ï¼Œåªæœ‰çŸ¥é“äº†å°ºå¯¸ï¼Œæ‰èƒ½æ›´å¥½åœ°ç¡®å®šåº”è¯¥æ‘†æ”¾çš„ä½ç½®ã€‚ç”±äºæ–‡å­—çš„ç»˜åˆ¶å’Œå›¾å½¢æˆ– `Bitmap` çš„ç»˜åˆ¶æ¯”èµ·æ¥ï¼Œå°ºå¯¸çš„è®¡ç®—å¤æ‚å¾—å¤šï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€æ•´å¥—çš„æ–¹æ³•æ¥è®¡ç®—æ–‡å­—å°ºå¯¸ã€‚

#### 2.2.1 float getFontSpacing()

è·å–æ¨èçš„è¡Œè·ã€‚

å³æ¨èçš„ä¸¤è¡Œæ–‡å­—çš„ baseline çš„è·ç¦»ã€‚è¿™ä¸ªå€¼æ˜¯ç³»ç»Ÿæ ¹æ®æ–‡å­—çš„å­—ä½“å’Œå­—å·è‡ªåŠ¨è®¡ç®—çš„ã€‚å®ƒçš„ä½œç”¨æ˜¯å½“ä½ è¦æ‰‹åŠ¨ç»˜åˆ¶å¤šè¡Œæ–‡å­—ï¼ˆè€Œä¸æ˜¯ä½¿ç”¨ StaticLayoutï¼‰çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ¢è¡Œçš„æ—¶å€™ç»™ `y` åæ ‡åŠ ä¸Šè¿™ä¸ªå€¼æ¥ä¸‹ç§»æ–‡å­—ã€‚

```
canvas.drawText(texts[0], 100, 150, paint);  
canvas.drawText(texts[1], 100, 150 + paint.getFontSpacing, paint);  
canvas.drawText(texts[2], 100, 150 + paint.getFontSpacing * 2, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig66d27efj20ev06j401.jpg)

#### 2.2.2 FontMetircs getFontMetrics()

è·å– `Paint` çš„ `FontMetrics`ã€‚

`FontMetrics` æ˜¯ä¸ªç›¸å¯¹ä¸“ä¸šçš„å·¥å…·ç±»ï¼Œå®ƒæä¾›äº†å‡ ä¸ªæ–‡å­—æ’å°æ–¹é¢çš„æ•°å€¼ï¼š`ascent`, `descent`, `top`, `bottom`, `leading`ã€‚

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig66iud3gj20ik0bn41l.jpg)

å¦‚å›¾ï¼Œå›¾ä¸­æœ‰ä¸¤è¡Œæ–‡å­—ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰ 5 æ¡çº¿ï¼š`top`, `ascent`, `baseline`, `descent`, `bottom`ã€‚ï¼ˆ`leading` å¹¶æ²¡æœ‰ç”»å‡ºæ¥ï¼Œå› ä¸ºç”»ä¸å‡ºæ¥ï¼Œä¸‹é¢ä¼šç»™å‡ºè§£é‡Šï¼‰

*   `baseline`: ä¸Šå›¾ä¸­**é»‘è‰²**çš„çº¿ã€‚å‰é¢å·²ç»è®²è¿‡äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½œä¸ºæ–‡å­—æ˜¾ç¤ºçš„åŸºå‡†çº¿ã€‚

*   `ascent` / `descent`: ä¸Šå›¾ä¸­**ç»¿è‰²**å’Œ**æ©™è‰²**çš„çº¿ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯é™åˆ¶æ™®é€šå­—ç¬¦çš„é¡¶éƒ¨å’Œåº•éƒ¨èŒƒå›´ã€‚
    æ™®é€šçš„å­—ç¬¦ï¼Œä¸Šä¸ä¼šé«˜è¿‡ `ascent` ï¼Œä¸‹ä¸ä¼šä½è¿‡ `descent` ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­å¤§éƒ¨åˆ†çš„å­—å½¢éƒ½æ˜¾ç¤ºåœ¨ `ascent` å’Œ `descent` ä¸¤æ¡çº¿çš„èŒƒå›´å†…ã€‚å…·ä½“åˆ° Android çš„ç»˜åˆ¶ä¸­ï¼Œ `ascent` çš„å€¼æ˜¯å›¾ä¸­ç»¿çº¿å’Œ `baseline` çš„ç›¸å¯¹ä½ç§»ï¼Œå®ƒçš„å€¼ä¸ºè´Ÿï¼ˆå› ä¸ºå®ƒåœ¨ `baseline` çš„ä¸Šæ–¹ï¼‰ï¼› `descent` çš„å€¼æ˜¯å›¾ä¸­æ©™çº¿å’Œ `baseline` ç›¸å¯¹ä½ç§»ï¼Œå€¼ä¸ºæ­£ï¼ˆå› ä¸ºå®ƒåœ¨ `baseline` çš„ä¸‹æ–¹ï¼‰ã€‚

*   `top` / `bottom`: ä¸Šå›¾ä¸­**è“è‰²**å’Œ**çº¢è‰²**çš„çº¿ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯é™åˆ¶æ‰€æœ‰[å­—å½¢ï¼ˆ glyph ï¼‰](https://zh.wikipedia.org/wiki/%E5%AD%97%E5%BD%A2)çš„é¡¶éƒ¨å’Œåº•éƒ¨èŒƒå›´ã€‚
    é™¤äº†æ™®é€šå­—ç¬¦ï¼Œæœ‰äº›å­—å½¢çš„æ˜¾ç¤ºèŒƒå›´æ˜¯ä¼šè¶…è¿‡ `ascent` å’Œ `descent` çš„ï¼Œè€Œ `top` å’Œ `bottom` åˆ™é™åˆ¶çš„æ˜¯æ‰€æœ‰å­—å½¢çš„æ˜¾ç¤ºèŒƒå›´ï¼ŒåŒ…æ‹¬è¿™äº›ç‰¹æ®Šå­—å½¢ã€‚ä¾‹å¦‚ä¸Šå›¾çš„ç¬¬äºŒè¡Œæ–‡å­—é‡Œï¼Œå°±æœ‰ä¸¤ä¸ªæ³°æ–‡çš„å­—å½¢åˆ†åˆ«è¶…è¿‡äº† `ascent` å’Œ `descent` çš„é™åˆ¶ï¼Œä½†å®ƒä»¬éƒ½åœ¨ `top` å’Œ `bottom` ä¸¤æ¡çº¿çš„èŒƒå›´å†…ã€‚å…·ä½“åˆ° Android çš„ç»˜åˆ¶ä¸­ï¼Œ `top` çš„å€¼æ˜¯å›¾ä¸­è“çº¿å’Œ `baseline` çš„ç›¸å¯¹ä½ç§»ï¼Œå®ƒçš„å€¼ä¸ºè´Ÿï¼ˆå› ä¸ºå®ƒåœ¨ `baseline` çš„ä¸Šæ–¹ï¼‰ï¼› `bottom` çš„å€¼æ˜¯å›¾ä¸­çº¢çº¿å’Œ `baseline` ç›¸å¯¹ä½ç§»ï¼Œå€¼ä¸ºæ­£ï¼ˆå› ä¸ºå®ƒåœ¨ `baseline` çš„ä¸‹æ–¹ï¼‰ã€‚

*   `leading`: è¿™ä¸ªè¯åœ¨ä¸Šå›¾ä¸­æ²¡æœ‰æ ‡è®°å‡ºæ¥ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯æŒ‡çš„æŸæ¡çº¿å’Œ `baseline` çš„ç›¸å¯¹ä½ç§»ã€‚ `leading` æŒ‡çš„æ˜¯è¡Œçš„é¢å¤–é—´è·ï¼Œå³å¯¹äºä¸Šä¸‹ç›¸é‚»çš„ä¸¤è¡Œï¼Œä¸Šè¡Œçš„ `bottom` çº¿å’Œä¸‹è¡Œçš„ `top` çº¿çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­**ç¬¬ä¸€è¡Œçš„çº¢çº¿**å’Œ**ç¬¬äºŒè¡Œçš„è“çº¿**çš„è·ç¦»ï¼ˆå¯¹ï¼Œå°±æ˜¯é‚£ä¸ªå°ç»†ç¼ï¼‰ã€‚

> `leading` è¿™ä¸ªè¯çš„æœ¬æ„å…¶å®å¹¶ä¸æ˜¯è¡Œçš„é¢å¤–é—´è·ï¼Œè€Œæ˜¯è¡Œè·ï¼Œå³ä¸¤ä¸ªç›¸é‚»è¡Œçš„ `baseline` ä¹‹é—´çš„è·ç¦»ã€‚ä¸è¿‡å¯¹äºå¾ˆå¤šéä¸“ä¸šé¢†åŸŸï¼Œ`leading` çš„æ„æ€è¢«æ”¹å˜äº†ï¼Œè¢«å¤§å®¶å½“åšè¡Œçš„é¢å¤–é—´è·æ¥ç”¨ï¼›è€Œ Android é‡Œçš„ `leading` ï¼ŒåŒæ ·ä¹Ÿæ˜¯è¡Œçš„é¢å¤–é—´è·çš„æ„æ€ã€‚
> 
> å¦å¤–ï¼Œ`leading` åœ¨è¿™é‡Œåº”è¯¥è¯»ä½œ "ledding" è€Œä¸æ˜¯ "leeding" å“¦ã€‚åŸå› å°±ä¸è¯´äº†ï¼Œæˆ‘è¿™è¶Šæ‰¯è¶Šè¿œæ²¡è¾¹äº†ã€‚

`FontMetrics` æä¾›çš„å°±æ˜¯ `Paint` æ ¹æ®å½“å‰å­—ä½“å’Œå­—å·ï¼Œå¾—å‡ºçš„è¿™äº›å€¼çš„æ¨èå€¼ã€‚å®ƒæŠŠè¿™äº›å€¼ä»¥å˜é‡çš„å½¢å¼å­˜å‚¨ï¼Œä¾›å¼€å‘è€…éœ€è¦æ—¶ä½¿ç”¨ã€‚

*   `FontMetrics.ascent`ï¼šfloat ç±»å‹ã€‚
*   `FontMetrics.descent`ï¼šfloat ç±»å‹ã€‚
*   `FontMetrics.top`ï¼šfloat ç±»å‹ã€‚
*   `FontMetrics.bottom`ï¼šfloat ç±»å‹ã€‚
*   `FontMetrics.leading`ï¼šfloat ç±»å‹ã€‚

å¦å¤–ï¼Œ`ascent` å’Œ `descent` è¿™ä¸¤ä¸ªå€¼è¿˜å¯ä»¥é€šè¿‡ `Paint.ascent()` å’Œ `Paint.descent()` æ¥å¿«æ·è·å–ã€‚

> **FontMetrics å’Œ getFontSpacing()ï¼š**
> 
> ä»å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œä¸Šå›¾ä¸­ä¸¤è¡Œæ–‡å­—çš„ font spacing (å³ç›¸é‚»ä¸¤è¡Œçš„ `baseline` çš„è·ç¦») å¯ä»¥é€šè¿‡ `bottom - top + leading` (`top` çš„å€¼ä¸ºè´Ÿï¼Œå‰é¢åˆšè¯´è¿‡ï¼Œè®°å¾—å§ï¼Ÿï¼‰æ¥è®¡ç®—å¾—å‡ºã€‚
> 
> ä½†ä½ çœŸçš„è¿è¡Œä¸€ä¸‹ä¼šå‘ç°ï¼Œ `bottom - top + leading` çš„ç»“æœæ˜¯è¦å¤§äº `getFontSpacing()` çš„è¿”å›å€¼çš„ã€‚
> 
> ä¸¤ä¸ªæ–¹æ³•è®¡ç®—å¾—å‡ºçš„ font spacing ç«Ÿç„¶ä¸ä¸€æ ·ï¼Ÿ
> 
> è¿™å¹¶ä¸æ˜¯ bugï¼Œè€Œæ˜¯å› ä¸º `getFontSpacing()` çš„ç»“æœå¹¶ä¸æ˜¯é€šè¿‡ `FontMetrics` çš„æ ‡å‡†å€¼è®¡ç®—å‡ºæ¥çš„ï¼Œè€Œæ˜¯å¦å¤–è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªå€¼ï¼Œå®ƒèƒ½å¤Ÿåšåˆ°åœ¨ä¸¤è¡Œæ–‡å­—ä¸æ˜¾å¾—æ‹¥æŒ¤çš„å‰æä¸‹ç¼©çŸ­è¡Œè·ï¼Œä»¥æ­¤æ¥å¾—åˆ°æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœã€‚æ‰€ä»¥å¦‚æœä½ è¦å¯¹æ–‡å­—æ‰‹åŠ¨æ¢è¡Œç»˜åˆ¶ï¼Œå¤šæ•°æ—¶å€™åº”è¯¥é€‰å– `getFontSpacing()` æ¥å¾—åˆ°è¡Œè·ï¼Œä¸ä½†ä½¿ç”¨æ›´ç®€å•ï¼Œæ˜¾ç¤ºæ•ˆæœä¹Ÿä¼šæ›´å¥½ã€‚

`getFontMetrics()` çš„è¿”å›å€¼æ˜¯ `FontMetrics` ç±»å‹ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªé‡è½½æ–¹æ³• `getFontMetrics(FontMetrics fontMetrics)` ï¼Œè®¡ç®—ç»“æœä¼šç›´æ¥å¡«è¿›ä¼ å…¥çš„ `FontMetrics` å¯¹è±¡ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™ç§ç”¨æ³•åœ¨éœ€è¦é¢‘ç¹è·å– `FontMetrics` çš„æ—¶å€™æ€§èƒ½ä¼šå¥½äº›ã€‚

å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•è¿˜æœ‰ä¸€å¯¹åŒæ ·ç»“æ„çš„å¯¹åº”çš„æ–¹æ³• `getFontMetricsInt()` å’Œ `getFontMetricsInt(FontMetricsInt fontMetrics)` ï¼Œç”¨äºè·å– `FontMetricsInt` ç±»å‹çš„ç»“æœã€‚

#### 2.2.3 getTextBounds(String text, int start, int end, Rect bounds)

è·å–æ–‡å­—çš„æ˜¾ç¤ºèŒƒå›´ã€‚

å‚æ•°é‡Œï¼Œ`text` æ˜¯è¦æµ‹é‡çš„æ–‡å­—ï¼Œ`start` å’Œ `end` åˆ†åˆ«æ˜¯æ–‡å­—çš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œ`bounds` æ˜¯å­˜å‚¨æ–‡å­—æ˜¾ç¤ºèŒƒå›´çš„å¯¹è±¡ï¼Œæ–¹æ³•åœ¨æµ‹ç®—å®Œæˆä¹‹åä¼šæŠŠç»“æœå†™è¿› `bounds`ã€‚

```
paint.setStyle(Paint.Style.FILL);  
canvas.drawText(text, offsetX, offsetY, paint);

paint.getTextBounds(text, 0, text.length(), bounds);  
bounds.left += offsetX;  
bounds.top += offsetY;  
bounds.right += offsetX;  
bounds.bottom += offsetY;  
paint.setStyle(Paint.Style.STROKE);  
canvas.drawRect(bounds, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig66pdyg4j20ct02tmxf.jpg)

å®ƒæœ‰ä¸€ä¸ªé‡è½½æ–¹æ³• `getTextBounds(char[] text, int index, int count, Rect bounds)`ï¼Œç”¨æ³•éå¸¸ç›¸ä¼¼ï¼Œä¸å†ä»‹ç»ã€‚

#### 2.2.4 float measureText(String text)

æµ‹é‡æ–‡å­—çš„å®½åº¦å¹¶è¿”å›ã€‚

```
canvas.drawText(text, offsetX, offsetY, paint);  
float textWidth = paint.measureText(text);  
canvas.drawLine(offsetX, offsetY, offsetX + textWidth, offsetY, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig671on56j20or04a0te.jpg)

å’¦ï¼Œå‰é¢æœ‰äº† `getTextBounds()`ï¼Œè¿™é‡Œæ€ä¹ˆåˆæœ‰ä¸€ä¸ª `measureText()`ï¼Ÿ

å¦‚æœä½ ç”¨ä»£ç åˆ†åˆ«ä½¿ç”¨ `getTextBounds()` å’Œ `measureText()` æ¥æµ‹é‡æ–‡å­—çš„å®½åº¦ï¼Œä½ ä¼šå‘ç° `measureText()` æµ‹å‡ºæ¥çš„å®½åº¦æ€»æ˜¯æ¯” `getTextBounds()` å¤§ä¸€ç‚¹ç‚¹ã€‚è¿™æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•å…¶å®æµ‹é‡çš„æ˜¯ä¸¤ä¸ªä¸ä¸€æ ·çš„ä¸œè¥¿ã€‚

*   `getTextBounds`: å®ƒæµ‹é‡çš„æ˜¯æ–‡å­—çš„æ˜¾ç¤ºèŒƒå›´ï¼ˆå…³é”®è¯ï¼šæ˜¾ç¤ºï¼‰ã€‚å½¢è±¡ç‚¹æ¥è¯´ï¼Œä½ è¿™æ®µæ–‡å­—å¤–æ”¾ç½®ä¸€ä¸ªå¯å˜çš„çŸ©å½¢ï¼Œç„¶åæŠŠçŸ©å½¢å°½å¯èƒ½åœ°ç¼©å°ï¼Œä¸€ç›´å°åˆ°è¿™ä¸ªçŸ©å½¢æ°å¥½ç´§ç´§åŒ…è£¹ä½æ–‡å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©å½¢çš„èŒƒå›´ï¼Œå°±æ˜¯è¿™æ®µæ–‡å­—çš„ boundsã€‚

*   `measureText()`: å®ƒæµ‹é‡çš„æ˜¯æ–‡å­—ç»˜åˆ¶æ—¶æ‰€å ç”¨çš„å®½åº¦ï¼ˆå…³é”®è¯ï¼šå ç”¨ï¼‰ã€‚å‰é¢å·²ç»è®²è¿‡ï¼Œä¸€ä¸ªæ–‡å­—åœ¨ç•Œé¢ä¸­ï¼Œå¾€å¾€éœ€è¦å ç”¨æ¯”ä»–çš„å®é™…æ˜¾ç¤ºå®½åº¦æ›´å¤šä¸€ç‚¹çš„å®½åº¦ï¼Œä»¥æ­¤æ¥è®©æ–‡å­—å’Œæ–‡å­—ä¹‹é—´ä¿ç•™ä¸€äº›é—´è·ï¼Œä¸ä¼šæ˜¾å¾—è¿‡äºæ‹¥æŒ¤ã€‚ä¸Šé¢çš„è¿™å¹…å›¾ï¼Œæˆ‘å¹¶æ²¡æœ‰è®¾ç½® `setLetterSpacing()` ï¼Œè¿™é‡Œçš„ letter spacing æ˜¯é»˜è®¤å€¼ 0ï¼Œä½†ä½ å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­æ¯ä¸¤ä¸ªå­—æ¯ä¹‹é—´éƒ½æ˜¯æœ‰ç©ºéš™çš„ã€‚å¦å¤–ï¼Œä¸‹æ–¹é‚£æ¡ç”¨äºè¡¨ç¤ºæ–‡å­—å®½åº¦çš„æ¨ªçº¿ï¼Œåœ¨å·¦è¾¹è¶…å‡ºäº†ç¬¬ä¸€ä¸ªå­—æ¯ `H` ä¸€æ®µè·ç¦»çš„ï¼Œåœ¨å³è¾¹ä¹Ÿè¶…å‡ºäº†æœ€åä¸€ä¸ªå­—æ¯ `r`ï¼ˆè™½ç„¶å³è¾¹è¿™é‡Œç”¨è‚‰çœ¼ä¸å¤ªå®¹æ˜“åˆ†è¾¨ï¼‰ï¼Œè€Œå°±æ˜¯ä¸¤è¾¹çš„è¿™ä¸¤ä¸ªã€Œè¶…å‡ºã€ï¼Œå¯¼è‡´äº† `measureText()` æ¯” `getTextBounds()` æµ‹é‡å‡ºçš„å®½åº¦è¦å¤§ä¸€äº›ã€‚

åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæµ‹é‡å®½åº¦è¦ç”¨ `measureText()` è¿˜æ˜¯ `getTextBounds()` ï¼Œéœ€è¦æ ¹æ®æƒ…å†µè€Œå®šã€‚ä¸è¿‡ä½ åªè¦æŒæ¡äº†ä¸Šé¢æˆ‘æ‰€è¯´çš„å®ƒä»¬çš„æœ¬è´¨ï¼Œåœ¨é€‰æ‹©çš„æ—¶å€™å°±ä¸ä¼šä¸ºéš¾å’Œç–‘æƒ‘äº†ã€‚

`measureText(String text)` ä¹Ÿæœ‰å‡ ä¸ªé‡è½½æ–¹æ³•ï¼Œç”¨æ³•å’Œå®ƒå¤§åŒå°å¼‚ï¼Œä¸å†ä»‹ç»ã€‚

#### 2.2.5 getTextWidths(String text, float[] widths)

è·å–å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„å®½åº¦ï¼Œå¹¶æŠŠç»“æœå¡«å…¥å‚æ•° `widths`ã€‚

è¿™ç›¸å½“äº `measureText()` çš„ä¸€ä¸ªå¿«æ·æ–¹æ³•ï¼Œå®ƒçš„è®¡ç®—ç­‰ä»·äºå¯¹å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦åˆ†åˆ«è°ƒç”¨ `measureText()` ï¼Œå¹¶æŠŠå®ƒä»¬çš„è®¡ç®—ç»“æœåˆ†åˆ«å¡«å…¥ `widths` çš„ä¸åŒå…ƒç´ ã€‚

`getTextWidths()` åŒæ ·ä¹Ÿæœ‰å¥½å‡ ä¸ªå˜ç§ï¼Œä½¿ç”¨å¤§åŒå°å¼‚ï¼Œä¸å†ä»‹ç»ã€‚

#### 2.2.6 int breakText(String text, boolean measureForwards, float maxWidth, float[] measuredWidth)

è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ç”¨æ¥æµ‹é‡æ–‡å­—å®½åº¦çš„ã€‚ä½†å’Œ `measureText()` çš„åŒºåˆ«æ˜¯ï¼Œ `breakText()` æ˜¯åœ¨ç»™å‡ºå®½åº¦ä¸Šé™çš„å‰æä¸‹æµ‹é‡æ–‡å­—çš„å®½åº¦ã€‚å¦‚æœæ–‡å­—çš„å®½åº¦è¶…å‡ºäº†ä¸Šé™ï¼Œé‚£ä¹ˆåœ¨ä¸´è¿‘è¶…é™çš„ä½ç½®æˆªæ–­æ–‡å­—ã€‚

```
int measuredCount;  
float[] measuredWidth = {0};

// å®½åº¦ä¸Šé™ 300 ï¼ˆä¸å¤Ÿç”¨ï¼Œæˆªæ–­ï¼‰
measuredCount = paint.breakText(text, 0, text.length(), true, 300, measuredWidth);  
canvas.drawText(text, 0, measuredCount, 150, 150, paint);

// å®½åº¦ä¸Šé™ 400 ï¼ˆä¸å¤Ÿç”¨ï¼Œæˆªæ–­ï¼‰
measuredCount = paint.breakText(text, 0, text.length(), true, 400, measuredWidth);  
canvas.drawText(text, 0, measuredCount, 150, 150 + fontSpacing, paint);

// å®½åº¦ä¸Šé™ 500 ï¼ˆå¤Ÿç”¨ï¼‰
measuredCount = paint.breakText(text, 0, text.length(), true, 500, measuredWidth);  
canvas.drawText(text, 0, measuredCount, 150, 150 + fontSpacing * 2, paint);

// å®½åº¦ä¸Šé™ 600 ï¼ˆå¤Ÿç”¨ï¼‰
measuredCount = paint.breakText(text, 0, text.length(), true, 600, measuredWidth);  
canvas.drawText(text, 0, measuredCount, 150, 150 + fontSpacing * 3, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig67950cnj21080m4grf.jpg)

`breakText()` çš„è¿”å›å€¼æ˜¯æˆªå–çš„æ–‡å­—ä¸ªæ•°ï¼ˆå¦‚æœå®½åº¦æ²¡æœ‰è¶…é™ï¼Œåˆ™æ˜¯æ–‡å­—çš„æ€»ä¸ªæ•°ï¼‰ã€‚å‚æ•°ä¸­ï¼Œ `text` æ˜¯è¦æµ‹é‡çš„æ–‡å­—ï¼›`measureForwards` è¡¨ç¤ºæ–‡å­—çš„æµ‹é‡æ–¹å‘ï¼Œ`true` è¡¨ç¤ºç”±å·¦å¾€å³æµ‹é‡ï¼›`maxWidth` æ˜¯ç»™å‡ºçš„å®½åº¦ä¸Šé™ï¼›`measuredWidth` æ˜¯ç”¨äºæ¥å—æ•°æ®ï¼Œè€Œä¸æ˜¯ç”¨äºæä¾›æ•°æ®çš„ï¼šæ–¹æ³•æµ‹é‡å®Œæˆåä¼šæŠŠæˆªå–çš„æ–‡å­—å®½åº¦ï¼ˆå¦‚æœå®½åº¦æ²¡æœ‰è¶…é™ï¼Œåˆ™ä¸ºæ–‡å­—æ€»å®½åº¦ï¼‰èµ‹å€¼ç»™ `measuredWidth[0]`ã€‚

è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨äºå¤šè¡Œæ–‡å­—çš„æŠ˜è¡Œè®¡ç®—ã€‚

`breakText()` ä¹Ÿæœ‰å‡ ä¸ªé‡è½½æ–¹æ³•ï¼Œä½¿ç”¨å¤§åŒå°å¼‚ï¼Œä¸å†ä»‹ç»ã€‚

#### 2.2.7 å…‰æ ‡ç›¸å…³

å¯¹äº `EditText` ä»¥åŠç±»ä¼¼çš„åœºæ™¯ï¼Œä¼šéœ€è¦ç»˜åˆ¶å…‰æ ‡ã€‚å…‰æ ‡çš„è®¡ç®—å¾ˆéº»çƒ¦ï¼Œä¸è¿‡ API 23 å¼•å…¥äº†ä¸¤ä¸ªæ–°çš„æ–¹æ³•ï¼Œæœ‰äº†è¿™ä¸¤ä¸ªæ–¹æ³•åï¼Œè®¡ç®—å…‰æ ‡å°±æ–¹ä¾¿äº†å¾ˆå¤šã€‚

##### 2.2.7.1 getRunAdvance(CharSequence text, int start, int end, int contextStart, int contextEnd, boolean isRtl, int offset)

å¯¹äºä¸€æ®µæ–‡å­—ï¼Œè®¡ç®—å‡ºæŸä¸ªå­—ç¬¦å¤„å…‰æ ‡çš„ `x` åæ ‡ã€‚ `start` `end` æ˜¯æ–‡å­—çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›`contextStart` `contextEnd` æ˜¯ä¸Šä¸‹æ–‡çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›`isRtl` æ˜¯æ–‡å­—çš„æ–¹å‘ï¼›`offset` æ˜¯å­—æ•°çš„åç§»ï¼Œå³è®¡ç®—ç¬¬å‡ ä¸ªå­—ç¬¦å¤„çš„å…‰æ ‡ã€‚

```
int length = text.length();  
float advance = paint.getRunAdvance(text, 0, length, 0, length, false, length);  
canvas.drawText(text, offsetX, offsetY, paint);  
canvas.drawLine(offsetX + advance, offsetY - 50, offsetX + advance, offsetY + 10, paint);  

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig67hkga6j20cx0373ys.jpg)

å…¶å®ï¼Œè¯´æ˜¯æµ‹é‡å…‰æ ‡ä½ç½®çš„ï¼Œæœ¬è´¨ä¸Šè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæµ‹é‡æ–‡å­—å®½åº¦çš„æ–¹æ³•ã€‚ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`start` å’Œ `contextStart` éƒ½æ˜¯ 0ï¼Œ `end` `contextEnd` å’Œ `offset` éƒ½ç­‰äº `text.length()`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç­‰ä»·äº `measureText(text)` çš„ï¼Œå³å®Œæ•´æµ‹é‡ä¸€æ®µæ–‡å­—çš„å®½åº¦ã€‚è€Œå¯¹äºæ›´å¤æ‚çš„éœ€æ±‚ï¼Œ`getRunAdvance()` èƒ½åšçš„äº‹å°±æ¯” `measureText()` å¤šäº†ã€‚

```
// åŒ…å«ç‰¹æ®Šç¬¦å·çš„ç»˜åˆ¶ï¼ˆå¦‚ emoji è¡¨æƒ…ï¼‰
String text = "Hello HenCoder \uD83C\uDDE8\uD83C\uDDF3" // "Hello HenCoder ğŸ‡¨ğŸ‡³"

...

float advance1 = paint.getRunAdvance(text, 0, length, 0, length, false, length);  
float advance2 = paint.getRunAdvance(text, 0, length, 0, length, false, length - 1);  
float advance3 = paint.getRunAdvance(text, 0, length, 0, length, false, length - 2);  
float advance4 = paint.getRunAdvance(text, 0, length, 0, length, false, length - 3);  
float advance5 = paint.getRunAdvance(text, 0, length, 0, length, false, length - 4);  
float advance6 = paint.getRunAdvance(text, 0, length, 0, length, false, length - 5);

...

```

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig67pon53j215s0owdru.jpg)

å¦‚ä¸Šå›¾ï¼Œ`ğŸ‡¨ğŸ‡³` è™½ç„¶å äº† 4 ä¸ªå­—ç¬¦ï¼ˆ`\uD83C\uDDE8\uD83C\uDDF3`ï¼‰ï¼Œä½†å½“ offset æ˜¯è¡¨æƒ…ä¸­é—´å¤„æ—¶ï¼Œ `getRunAdvance()` å¾—å‡ºçš„ç»“æœå¹¶ä¸ä¼šåœ¨è¡¨æƒ…çš„ä¸­é—´å¤„ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™æ˜¯ç”¨æ¥è®¡ç®—å…‰æ ‡çš„æ–¹æ³•å•Šï¼Œå…‰æ ‡å½“ç„¶ä¸èƒ½å‡ºç°åœ¨ç¬¦å·ä¸­é—´å•¦ã€‚

##### 2.2.7.2 getOffsetForAdvance(CharSequence text, int start, int end, int contextStart, int contextEnd, boolean isRtl, float advance)

ç»™å‡ºä¸€ä¸ªä½ç½®çš„åƒç´ å€¼ï¼Œè®¡ç®—å‡ºæ–‡å­—ä¸­æœ€æ¥è¿‘è¿™ä¸ªä½ç½®çš„å­—ç¬¦åç§»é‡ï¼ˆå³ç¬¬å‡ ä¸ªå­—ç¬¦æœ€æ¥è¿‘è¿™ä¸ªåæ ‡ï¼‰ã€‚

æ–¹æ³•çš„å‚æ•°å¾ˆç®€å•ï¼š `text` æ˜¯è¦æµ‹é‡çš„æ–‡å­—ï¼›`start` `end` æ˜¯æ–‡å­—çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›`contextStart` `contextEnd` æ˜¯ä¸Šä¸‹æ–‡çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›`isRtl` æ˜¯æ–‡å­—æ–¹å‘ï¼›`advance` æ˜¯ç»™å‡ºçš„ä½ç½®çš„åƒç´ å€¼ã€‚å¡«å…¥å‚æ•°ï¼Œå¯¹åº”çš„å­—ç¬¦åç§»é‡å°†ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚

`getOffsetForAdvance()` é…åˆä¸Š `getRunAdvance()` ä¸€èµ·ä½¿ç”¨ï¼Œå°±å¯ä»¥å®ç°ã€Œè·å–ç”¨æˆ·ç‚¹å‡»å¤„çš„æ–‡å­—åæ ‡ã€çš„éœ€æ±‚ã€‚

#### 2.2.8 hasGlyph(String string)

æ£€æŸ¥æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­—å½¢ (glyphï¼‰ã€‚æœ€ç®€å•çš„æƒ…å†µæ˜¯ï¼Œ`string` åªæœ‰ä¸€ä¸ªå­—æ¯ï¼ˆæ¯”å¦‚ `a`ï¼‰ã€‚

![](https://ws1.sinaimg.cn/large/006tNc79ly1flgaf31rskj31120damyn.jpg)

ä»¥ä¸Šè¿™äº›å†…å®¹ï¼Œå°±æ˜¯æ–‡å­—ç»˜åˆ¶çš„ç›¸å…³çŸ¥è¯†ã€‚å®ƒä»¬æœ‰çš„å¸¸ç”¨ï¼Œæœ‰çš„ä¸å¸¸ç”¨ï¼Œæœ‰çš„ç”šè‡³å¯ä»¥è¯´æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹æ²¡ç”¨ï¼Œä¸è¿‡ä½ æŠŠå®ƒä»¬å…¨éƒ¨ææ‡‚äº†ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œå°±çŸ¥é“å“ªäº›äº‹æƒ…å¯ä»¥åšåˆ°ï¼Œå“ªäº›äº‹æƒ…åšä¸åˆ°ï¼Œä»¥åŠåº”è¯¥æ€ä¹ˆåšäº†ã€‚

## ç»ƒä¹ é¡¹ç›®

ä¸ºäº†é¿å…è½¬å¤´å°±å¿˜ï¼Œå¼ºçƒˆå»ºè®®ä½ è¶çƒ­æ‰“é“ï¼Œåšä¸€ä¸‹è¿™ä¸ªç»ƒä¹ é¡¹ç›®ï¼š[HenCoderPracticeDraw3](https://github.com/hencoder/PracticeDraw3)

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6bbce1oj20sb0fh40n.jpg)

## ä¸‹æœŸé¢„å‘Š

åŸºæœ¬ç»˜åˆ¶ï¼ˆ`Canvas.drawXXX()`ï¼‰ä»¥åŠé«˜çº§ç»˜åˆ¶ï¼ˆ`Paint`ï¼‰éƒ½è®²å®Œäº†ï¼Œä¸‹èŠ‚çš„å†…å®¹æ˜¯ `Canvas` å¯¹ç»˜åˆ¶çš„è¾…åŠ©ï¼šèŒƒå›´è£åˆ‡å’Œå‡ ä½•å˜æ¢ï¼š

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6837efzj20vh0gs454.jpg)

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig68pmuj8j20ny0gbq9x.jpg)

## æ„Ÿè°¢

æ„Ÿè°¢å‚ä¸è¿™æœŸé¢„å‘å¸ƒå†…æµ‹çš„è¯»è€…ï¼š

[æ—å­æ´‹](https://github.com/diamondlin2016)ã€Rookie runã€[showwiki](https://github.com/showwiki)ã€å­™å¿—å¸…ã€[Tim Aimee](https://github.com/timaimee)ã€æ˜å¤©ï¼Œä½ å¥½ã€[Mr.Coder](https://github.com/MrDeclanCoder)ã€ç‰¹ä¼¦ç‰¹ã€[æ‰¿é¦™å¢¨å½±](https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzIxNjc0ODExMA==&uin=ODMxNDQzNQ%3D%3D&key=272a7504a5923c2154c5bf72888636deac2274d81826db1dcc4e7954714f9776a17d14e5c9cabac7c337b9947a400c3668aad6510c9a8d3086cce8ed56dbb5d113665c4772ecf669240d594963be59e8&devicetype=iMac+MacBookPro11%2C5+OSX+OSX+10.12.5+build(16F73)&version=12020810&lang=zh_CN&nettype=WIFI&a8scene=0&fontScale=100&pass_ticket=3ZSTFlOd8P3j6MV7KWW3Yz6Vk%2FG9MLwZDkm668BrQCc%3D)ã€[HanDongFizz](https://github.com/HanDongFizz)ã€åœåœèµ°èµ°ã€[Vinctor](https://github.com/Vinctor)

## è§‰å¾—èµï¼Ÿ

å¦‚æœä½ çœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼ŒæŠŠæ–‡ç« è½¬å‘åˆ°ä½ çš„å¾®åšã€å¾®ä¿¡ç¾¤ã€æœ‹å‹åœˆã€å…¬ä¼—å·ï¼Œè®©å…¶ä»–éœ€è¦çš„äººä¹Ÿçœ‹åˆ°å§ã€‚

![](https://ws3.sinaimg.cn/large/52eb2279ly1fig68v045kj20p00bx424.jpg)

* * *